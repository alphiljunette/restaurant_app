    <!DOCTYPE html>
    <html lang="fr">
    <head>
        <base href="/"> 
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Gestion des Plats - Admin</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="./assets/gestion.css">
        <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    </head>
    <body>
        <div class="container">
            <div class="d-flex justify-content-between mb-3">
                <h1 class="mb-4">Gestion des Plats</h1>
                <div>
                    <span id="user-name" class="me-3"></span>
                    <div class="dropdown d-inline-block me-2">
                        <button class="btn btn-primary dropdown-toggle" type="button" id="commandesDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            Commandes
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="commandesDropdown">
                            <li><button class="dropdown-item" id="view-orders">Voir Commandes</button></li>
                            <li><button class="dropdown-item" id="view-history">Voir Historique</button></li>
                        </ul>
                    </div>
                    <button class="btn btn-secondary me-2" id="generate-qr-button">Générer QR Codes</button>
                    <button class="btn btn-danger" id="logout">Déconnexion</button>
                </div>
            </div>

            <div class="card mb-4">
                <div class="card-header">Ajouter un nouveau plat</div>
                <div class="card-body">
                    <form id="add-plat-form">
                        <div class="mb-3">
                            <label for="nom" class="form-label">Nom du plat</label>
                            <input type="text" class="form-control" id="nom" name="nom" required>
                        </div>
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="prix" class="form-label">Prix (Ar)</label>
                            <input type="number" class="form-control" id="prix" name="prix" step="0.01" required>
                        </div>
                        <div class="mb-3">
                            <label for="categorie" class="form-label">Catégorie</label>
                            <select class="form-select" id="categorie" name="categorie" required>
                                <option value="entrees">Entrées</option>
                                <option value="plats">Plats Principaux</option>
                                <option value="desserts">Desserts</option>
                                <option value="boissons">Boissons</option>
                                <option value="plats-jour">Plats du Jour</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="image" class="form-label">Image du plat</label>
                            <input type="file" class="form-control" id="image" name="image" accept="image/*">
                        </div>
                        <button type="submit" class="btn btn-primary">Ajouter</button>
                    </form>
                </div>
            </div>
            
            <ul class="nav nav-tabs" id="categoriesTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="entrees-tab" data-bs-toggle="tab" data-bs-target="#entrees" type="button" role="tab">Entrées</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="plats-tab" data-bs-toggle="tab" data-bs-target="#plats" type="button" role="tab">Plats Principaux</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="desserts-tab" data-bs-toggle="tab" data-bs-target="#desserts" type="button" role="tab">Desserts</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="boissons-tab" data-bs-toggle="tab" data-bs-target="#boissons" type="button" role="tab">Boissons</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="plats-jour-tab" data-bs-toggle="tab" data-bs-target="#plats-jour" type="button" role="tab">Plats du Jour</button>
                </li>
            </ul>
            
            <div class="tab-content mt-3">
                <div class="tab-pane fade show active" id="entrees-container" role="tabpanel"></div>
                <div class="tab-pane fade" id="plats-container" role="tabpanel"></div>
                <div class="tab-pane fade" id="desserts-container" role="tabpanel"></div>
                <div class="tab-pane fade" id="boissons-container" role="tabpanel"></div>
                <div class="tab-pane fade" id="plats-jour-container" role="tabpanel"></div>
            </div>
        </div>

        <!-- Modal pour modifier un plat -->
        <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="editModalLabel">Modifier un plat</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="edit-plat-form">
                            <input type="hidden" id="edit-plat-id" name="id">
                            <div class="mb-3">
                                <label for="editNom" class="form-label">Nom du plat</label>
                                <input type="text" class="form-control" id="editNom" name="nom" required>
                            </div>
                            <div class="mb-3">
                                <label for="editDescription" class="form-label">Description</label>
                                <textarea class="form-control" id="editDescription" name="description" required></textarea>
                            </div>
                            <div class="mb-3">
                                <label for="editPrix" class="form-label">Prix (Ar)</label>
                                <input type="number" class="form-control" id="editPrix" name="prix" step="0.01" required>
                            </div>
                            <div class="mb-3">
                                <label for="editCategorie" class="form-label">Catégorie</label>
                                <select class="form-select" id="editCategorie" name="categorie" required>
                                    <option value="entrees">Entrées</option>
                                    <option value="plats">Plats Principaux</option>
                                    <option value="desserts">Desserts</option>
                                    <option value="boissons">Boissons</option>
                                    <option value="plats-jour">Plats du Jour</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="editImage" class="form-label">Image du plat</label>
                                <input type="file" class="form-control" id="editImage" name="image" accept="image/*">
                                <div id="currentImage" class="form-text mt-2"></div>
                            </div>
                            <button type="submit" class="btn btn-primary">Mettre à jour</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal pour confirmer la suppression -->
        <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="deleteModalLabel">Confirmer la suppression</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        Êtes-vous sûr de vouloir supprimer ce plat ?
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                        <button type="button" class="btn btn-danger" id="confirmDelete">Supprimer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal pour voir les commandes -->
        <div class="modal fade" id="ordersModal" tabindex="-1" aria-labelledby="ordersModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-xl">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="ordersModalLabel">Commandes</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <!-- Boutons d'action -->
                        <div class="mb-3 d-flex justify-content-end gap-2" id="orders-action-buttons">
                            <button class="btn btn-success" id="markReady">Prêt</button>
                            <button class="btn btn-warning" id="sendNotification">Envoyer une notification</button>
                        </div>

                        <!-- Table des commandes -->
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered align-middle">
                                <thead class="table-light">
                                    <tr>
                                        <th scope="col"><input type="checkbox" id="select-all-orders"></th>
                                        <th scope="col">Numéro Commande</th>
                                        <th scope="col">Table</th>
                                        <th scope="col">Plats</th>
                                        <th scope="col">Statut</th>
                                        <th scope="col">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-list">
                                    <!-- Les commandes seront injectées ici via JS -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal pour voir l'historique -->
        <div class="modal fade" id="historyModal" tabindex="-1" aria-labelledby="historyModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="historyModalLabel">Historique des Commandes</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div id="history-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal pour gérer les QR Codes -->
        <div class="modal fade" id="qrcodeModal" tabindex="-1" aria-labelledby="qrcodeModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="qrcodeModalLabel">Gestion des QR Codes</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="table-number" class="form-label">Numéro de table</label>
                                <input type="number" class="form-control" id="table-number" min="1" required>
                            </div>
                            <div class="col-md-6 d-flex align-items-end">
                                <button type="button" class="btn btn-primary" id="generate-qr">Générer QR Code</button>
                            </div>
                        </div>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Table</th>
                                        <th>QR Code</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="qrcode-table-body">
                                    <!-- Les QR codes générés seront affichés ici -->
                                </tbody>
                            </table>
                        </div>
                        <div id="qrcode-container" class="mt-3 text-center"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals existants pour modifier/supprimer/historique/QR restent inchangés -->

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://unpkg.com/jwt-decode@3.1.2/build/jwt-decode.js"></script>
        <script src="./assets/js/script.js"></script>
    </body>
    </html>
